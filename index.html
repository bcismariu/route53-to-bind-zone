<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Route 53 JSON to BIND zonefile online converter</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-white text-gray-900 font-sans p-6">
    <div class="max-w-[1240px] mx-auto px-2">
        <h1 class="text-2xl font-bold mb-1">Route 53 JSON to BIND zonefile online converter</h1>
        <p class="text-gray-600 text-sm mb-4">
            Runs entirely in your browser â€” no upload to a server.
        </p>

        <div class="flex flex-wrap gap-3 mb-3 items-center">
            <div id="dropZone"
                class="flex items-center justify-center border-2 border-dashed border-blue-200 rounded bg-blue-50 text-blue-400 px-8 py-3 cursor-pointer transition hover:bg-blue-100 min-w-[340px] w-full max-w-xl mx-auto"
                style="min-height:2.5rem;">
                <span>Drag & drop r53.json here</span>
            </div>
            <div class="flex-1"></div>
            <button id="clearBtn"
                class="ml-auto px-3 py-1 rounded bg-red-100 hover:bg-red-200 text-red-800 border border-red-200">Clear</button>
        </div>

        <div id="status" class="text-gray-500 text-sm mb-1"></div>
        <div id="messages"></div>

        <div class="flex flex-wrap gap-6 items-start mt-6">
            <div class="flex-1 min-w-[320px]">
                <label for="jsonInput" class="font-semibold mb-1 block">JSON input</label>
                <textarea id="jsonInput" placeholder="Paste or load Route 53 JSON here"
                    class="w-full h-80 font-mono text-sm border rounded p-2 resize-y bg-white"></textarea>
                <div id="jsonCount" class="text-gray-500 text-xs mt-1">Entries: 0</div>
            </div>
            <div class="flex-1 min-w-[320px] flex flex-col">
                <label for="output" class="font-semibold mb-1 block">BIND zonefile output</label>
                <pre id="output"
                    class="w-full h-80 font-mono text-sm border rounded p-2 bg-white overflow-auto select-text whitespace-pre"
                    style="min-height:20rem;"></pre>
                <div id="bindCount" class="text-gray-500 text-xs mt-1">Entries: 0</div>
                <button id="downloadBtn" disabled
                    class="self-end mt-2 px-3 py-1 rounded bg-green-100 text-green-800 border border-green-200 hover:bg-green-200 disabled:opacity-50 hidden">Download
                    zonefile</button>
            </div>
        </div>

        <!-- AWS Export Instructions -->
        <div class="max-w-3xl mx-auto mt-10 bg-blue-50 border border-blue-100 rounded p-5 text-sm text-gray-800">
            <h2 class="font-semibold text-base mb-2 text-blue-900">How to Export Your Route 53 DNS Records from AWS</h2>
            <ol class="list-decimal list-inside space-y-2">
                <li>
                    <b>Open AWS CloudShell</b><br>
                    Go to the AWS Console and click the CloudShell icon in the top navigation bar. Wait for the terminal
                    to load.
                </li>
                <li>
                    <b>List Your Hosted Zones</b><br>
                    <div class="relative group">
                        <button type="button"
                            class="absolute right-2 top-2 z-10 text-xs text-blue-700 bg-blue-100 rounded px-2 py-0.5 opacity-80 hover:opacity-100 copy-btn"
                            data-copy="aws route53 list-hosted-zones">Copy</button>
                        <pre
                            class="block bg-gray-100 rounded px-2 py-2 my-1 text-xs whitespace-pre-wrap"><code>aws route53 list-hosted-zones</code></pre>
                    </div>
                    Find the <code>Id</code> of the zone you want to export (it looks like
                    <code>/hostedzone/XXXXXXXXXXXXXX</code>).
                </li>
                <li>
                    <b>Export DNS Records to JSON</b><br>
                    Replace <code>ZXXXXXXXXXXXXXX</code> with your actual hosted zone ID (omit the
                    <code>/hostedzone/</code> prefix):
                    <div class="relative group">
                        <button type="button"
                            class="absolute right-2 top-2 z-10 text-xs text-blue-700 bg-blue-100 rounded px-2 py-0.5 opacity-80 hover:opacity-100 copy-btn"
                            data-copy="aws route53 list-resource-record-sets \
  --hosted-zone-id ZXXXXXXXXXXXXXX \
  --output json \
  > r53.json">Copy</button>
                        <pre class="block bg-gray-100 rounded px-2 py-2 my-1 text-xs whitespace-pre-wrap"><code>aws route53 list-resource-record-sets \
  --hosted-zone-id ZXXXXXXXXXXXXXX \
  --output json \
  &gt; r53.json</code></pre>
                    </div>
                    This creates a file named <code>r53.json</code> in your CloudShell home directory.
                </li>
                <li>
                    <b>Download the JSON File to Your Computer</b><br>
                    In CloudShell, click the <b>Actions</b> menu (top right of the terminal window) and choose
                    <b>Download file</b>.<br>
                    Enter <code>r53.json</code> as the file to download. The file will be downloaded to your computer
                    and is ready for use in this app.
                </li>
            </ol>
        </div>
    </div>
    <script src="main.js"></script>
    <script>
        // Copy button logic for AWS instructions
        document.addEventListener('DOMContentLoaded', function () {
            document.querySelectorAll('.copy-btn').forEach(function (btn) {
                btn.addEventListener('click', function () {
                    const text = btn.getAttribute('data-copy')
                    navigator.clipboard.writeText(text)
                    btn.textContent = 'Copied!'
                    setTimeout(() => { btn.textContent = 'Copy' }, 1200)
                })
            })
        });
    </script>
</body>

</html>
